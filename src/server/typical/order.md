# 订单管理
订单是电商系统的核心业务实体，涉及订单创建、状态流转、支付对接、库存扣减、物流跟踪等多个环节，是状态机和分布式事务的典型应用场景。

- **订单状态**：待支付、已支付、已发货、已完成、已取消、退款中、已退款
- **状态机设计**：状态流转规则、触发条件、动作执行、事件通知
- **幂等性**：订单唯一 ID、防重复提交、接口幂等设计
- **分布式事务**：订单与库存、订单与支付、TCC/Saga 模式、最终一致性
- **补偿机制**：订单超时取消、支付失败回滚、库存返还、对账系统