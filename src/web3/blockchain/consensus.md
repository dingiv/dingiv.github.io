---
title: 共识机制
order: 2
---
# 共识机制

## P2P 网络

对比 C/S 的中心化网络

## 拜占庭容错（BFT）

拜占庭容错系统能在存在恶意节点的情况下保证系统正常运行，是分布式系统容错理论的基础。实用的拜占庭容错（PBFT）通过多轮投票达成共识，适合联盟链场景，但节点数量扩展性有限。

## 工作量证明（PoW）

PoW要求节点通过计算复杂哈希谜题来竞争记账权，算力越大获得记账权的概率越高。比特币采用PoW机制，虽然安全性高但能源消耗巨大，且存在算力中心化的风险。

## 权益证明（PoS）

PoS根据节点持有的代币数量和质押时间来选择记账人，大幅降低了能源消耗。以太坊从PoW转向PoS后，能耗降低了约99.95%，同时引入了惩罚机制（slashing）来打击恶意行为。

## 委托权益证明（DPoS）

DPoS让代币持有者投票选出有限的超级节点进行记账，大幅提高了交易处理速度。这种机制牺牲了一定的去中心化程度以换取性能，常用于高吞吐量的公链如EOS。

## 实用拜占庭容错（PBFT）

PBFT通过预准备、准备和提交三个阶段的投票达成共识，能够在确认节点身份的私有链环境中实现快速最终性。Hyperledger Fabric等联盟链多采用PBFT的变种算法。

## Proof of Authority（PoA）

PoA机制由预先授权的可信节点负责打包区块，适合私有链和联盟链场景。这种机制效率极高且不需要代币，但牺牲了去中心化特性，依赖权威节点的信誉。

## Casper与混合共识

Casper是以太坊的PoS协议，通过保证金制度和经济惩罚机制保证安全性。混合共识机制结合PoW和PoS的优点，逐步实现从工作量证明到权益证明的平滑过渡。

## 长程攻击与最终性

长程攻击是指攻击者用旧私钥创建竞争链，PoS通过检查点机制和弱主观性来解决此问题。最终性指交易一旦确认就不可逆转，PoS的Casper FFG提供了经济最终性保证。

## 分片与跨链通信

分片技术将区块链网络分成多个并行处理交易的片，每个片维护自己的状态，通过跨片通信协议保持一致性。跨链技术如Polkadot的XCMP和Cosmos的IBC实现了不同区块链之间的资产和信息互通。
