import{_ as e,o as r,c as C,ah as a}from"./chunks/framework.BvDvRtye.js";const d=JSON.parse('{"title":"打板","description":"","frontmatter":{"title":"打板","order":3},"headers":[],"relativePath":"kernel/embed/elel/design.md","filePath":"kernel/embed/elel/design.md"}'),B={name:"kernel/embed/elel/design.md"};function o(t,p,P,n,l,i){return r(),C("div",null,[...p[0]||(p[0]=[a('<h1 id="pcb-设计" tabindex="-1">PCB 设计 <a class="header-anchor" href="#pcb-设计" aria-label="Permalink to “PCB 设计”">​</a></h1><p>PCB 设计是将电路原理转化为可制造的物理板子的过程，是嵌入式硬件开发的核心环节。一个完整的 PCB 设计流程包括需求分析、原理图设计、元器件选型、PCB 布局布线、设计验证、 Gerber 文件生成等多个步骤，每个步骤都有其技术要点和注意事项。</p><p>嵌入式的硬件往往要追求极致的结构精简和性能压榨，顺应制造业的残酷底层逻辑。因此，嵌入式设备的开发，往往需要介入一定的硬件定制，并结合 PCB 分层设计思想，在复用已有硬件的同时，达到最大的可定制性。</p><h2 id="开发路径选择" tabindex="-1">开发路径选择 <a class="header-anchor" href="#开发路径选择" aria-label="Permalink to “开发路径选择”">​</a></h2><p>根据 PCB 的分层架构，嵌入式硬件开发有三种主要路径。</p><p><strong>路径一：直接采购 SBC</strong></p><p>对于大多数嵌入式开发者，这是最常见的选择。开发者直接采购现成的 SBC（如树莓派、BeagleBone、NVIDIA Jetson），这些板卡已经集成了 SoC、内存、存储接口和各种外设接口，可以直接运行 Linux，非常适合快速原型开发和教学。</p><p>这种方式的优势是开箱即用，无需设计硬件，可以直接专注于软件开发。缺点是硬件配置固定，无法根据需求定制，且价格比自行设计要高。适合产品验证、原型开发、教学实验等场景。</p><p><strong>路径二：采购 SoM，自设计底板</strong></p><p>当现成 SBC 无法满足需求时，可以考虑采购 SoM（核心板），然后自行设计底板。开发者只需根据 SoC 的接口文档，将 SoM 对接到自己设计的底板上即可。这种方式在 SoC 升级换代时只需更换核心板，无需重新设计底板，大大降低了研发成本。</p><p>但需要注意的是，即使是底板设计，也不是一般开发者能够轻松完成的。复杂的底板涉及高速信号布线、电源管理、EMC 等问题，需要专业的硬件设计经验。同时，SoM 的采购成本较高，小批量采购时价格优势不明显。适合需要一定定制化但又有硬件设计能力的企业。</p><p><strong>路径三：自行设计 PCB</strong></p><p>对于高度定制的板子或者简单的 MCU 板子，开发者可以尝试自行设计整个 PCB。这种方式从原理图设计、PCB 布局布线到打板焊接全流程自主控制，成本最低且灵活性最高。</p><p>但自行设计 PCB 的技术门槛很高，需要掌握 EDA 工具、了解 PCB 制造工艺、具备信号完整性设计能力。对于 BGA 封装的 SoC，还需要专业的焊接设备和返修能力。适合简单的 MCU 应用、大规模生产成本敏感、或者有专业硬件团队的项目。</p><p>实际工程中，很多项目会混合使用多种路径。原型阶段使用现成 SBC 快速验证，量产阶段根据需求选择 SoM 或自设计 PCB。关键是根据项目实际情况，在开发速度、成本控制和定制需求之间找到平衡点。</p><h2 id="pcb-设计主要流程" tabindex="-1">PCB 设计主要流程 <a class="header-anchor" href="#pcb-设计主要流程" aria-label="Permalink to “PCB 设计主要流程”">​</a></h2><ol><li><p>需求分析</p><p>在开始设计之前，首先要明确 PCB 的功能需求和使用环境。功能需求包括需要实现哪些电路功能、有哪些接口、性能指标如何；使用环境包括工作温度范围、是否需要防水防尘、安装空间限制等。这些需求直接影响后续的元器件选型和 PCB 设计策略。</p><p>对于高速数字电路，需要关注信号完整性、电源完整性、EMC 等问题；对于模拟电路，需要关注噪声、干扰、接地等问题；对于功率电路，需要关注散热、电流承载能力等问题。不同类型的电路，设计重点完全不同，需要在需求分析阶段就明确下来。</p></li><li><p>原理图设计</p><p>原理图是 PCB 设计的基础，描述了电路的连接关系和功能逻辑。原理图设计可以使用 KiCad、EasyEDA、Altium Designer、Cadence Allegro 等 EDA 工具。对于个人开发者和初学者，KiCad 是免费开源的选择，功能足够强大；EasyEDA 是在线工具，无需安装，适合快速原型；Altium Designer 是商业软件，功能强大但价格昂贵，适合专业工程师。</p><p>原理图设计时需要为每个元器件指定封装（Footprint），封装决定了元器件在 PCB 上的实际尺寸和焊盘形状。常见的封装库包括元器件厂商提供的官方封装库、EDA 工具自带的通用封装库、以及社区贡献的开源封装库。使用正确的封装是 PCB 设计成功的前提，封装错误会导致元器件无法焊接或安装。</p><p>原理图完成后，需要进行电气规则检查（ERC），确保没有悬空引脚、短路、电源连接错误等问题。ERC 可以发现大多数低级错误，但无法发现设计逻辑错误，需要工程师自行审查原理图的正确性。</p></li><li><p>元器件选型</p><p>元器件选型是 PCB 设计的关键环节，直接影响产品的性能、成本和可采购性。选型时需要考虑技术参数、封装形式、供货渠道、价格、替代料等多个因素。</p><p>MCU/SoC 选型要根据性能需求选择合适的处理器，考虑 CPU 性能、内存大小、外设接口等。同时要关注芯片的封装形式，QFP 封装易于焊接但引脚数量有限，BGA 封装引脚多但需要专业焊接工艺。对于个人开发者，建议优先选择 QFP 封装的芯片，降低焊接难度。</p><p>电源管理芯片要根据系统功耗选择合适的电源方案。LDO 线性稳压器简单但效率低，适合小功率场景；DC-DC 开关电源效率高但电路复杂，适合大功率场景。需要注意电源芯片的散热要求，必要时预留散热焊盘或外接散热片。</p><p>无源元件如电阻、电容、电感等要选择合适的封装尺寸。0805、0603 封装的手工焊接难度适中，0403、0201 封装太小，手工焊接困难。电容要考虑耐压值和 ESR，电阻要考虑功率等级和精度。</p><p>接插件决定了 PCB 与外部的连接方式，需要根据实际应用选择。排针、排母简单但可靠性差，板对板连接器可靠但价格高，USB/HDMI 等标准接口需要选择符合规范的插座。</p><p>元器件选型时要查询供货情况，优先选择市场上常见的型号，避免使用停产或稀有的芯片。可以通过立创商城、得捷电子、贸泽电子等渠道查询库存和价格。</p></li><li><p>PCB 布局布线</p><p>PCB 布局布线是将原理图转化为物理板子的过程，是 PCB 设计的核心环节。布局确定元器件在板子上的位置，布线确定铜箔走线的路径，两者相互影响，需要反复迭代。</p><p>首先要确定板子的尺寸和形状，这通常由机械结构决定。然后按照功能模块划分区域，将相关元器件集中放置。电源模块、接口模块、核心处理模块应该分开布局，避免相互干扰。高频、高速信号的元器件要尽量靠近，缩短走线长度。晶振要紧靠 MCU 的时钟引脚，USB 差分线要尽量短且等长，DDR 内存要靠近 SoC。敏感模拟信号要远离高速数字信号和电源开关器件，避免干扰。</p><p>多层板的层叠设计对信号完整性和 EMC 至关重要。典型的 4 层板叠层为 Top-GND-Power-Bottom，中间两层为电源层和地层，提供稳定的参考平面和低阻抗回流路径。6 层板可以增加两个信号层，8 层板可以进一步增加内层信号层。电源层和地层要尽量完整，避免分割。如果必须分割电源层，要避免高速信号跨越分割缝隙，否则会导致回流路径不完整，产生 EMI 问题。</p><p>根据电流大小确定线宽。电源线要足够粗，1A 电流建议至少 20mil 线宽，具体可以用在线 PCB 线宽计算器计算。地线要尽量宽，多点接地，降低接地阻抗。高速信号线要注意阻抗控制，通常单端 50Ω，差分 100Ω。走线要避免直角，优先使用 45 度角或圆弧，减少反射。差分线要等长、等距、紧耦合，严格控制阻抗。时钟信号要包地处理，减少辐射。</p><p>BGA 封装的芯片需要扇出设计，将焊盘引出到外层。扇出过孔通常要打在焊盘之间，可以使用盲孔减少过孔对内层的影响。关键信号要预留测试点，方便调试和故障排查。测试点可以是圆形焊盘或过孔，要便于示波器探头接触。</p></li><li><p>设计验证</p><p>PCB 设计完成后，需要进行全面的设计验证，确保设计没有错误且符合制造要求。</p><p>设计规则检查（DRC）是自动化的检查工具，可以发现线宽过细、间距过小、焊盘重叠等违反设计规则的问题。DRC 规则要根据 PCB 厂商的制造能力设置，一般厂商会提供推荐的 DRC 模板。DRC 通过不代表设计正确，只能说明没有违反设计规则。很多设计错误 DRC 无法发现，需要工程师自行审查。</p><p>对于高速信号（如 DDR、PCIe、USB），建议进行信号完整性仿真，验证时序和波形是否符合要求。仿真工具可以计算走线的阻抗、延时、损耗，预测反射和串扰情况。仿真需要 PCB 的精确模型和元器件的 IBIS 模型，建立模型需要时间和经验。对于低速信号（&lt; 50MHz），通常不需要仿真，经验法则足够。</p><p>对于大功率电路，可以进行热仿真，预测器件的温升分布。热仿真需要考虑器件功耗、PCB 热导率、环境温度等因素，可以判断散热设计是否足够。</p><p>最后要进行人工审查，检查原理图和 PCB 的一致性，确认关键信号的走线是否合理，验证电源和地线的连接是否正确。人工审查可以发现很多自动化工具无法发现的问题，是设计验证的重要环节。</p></li><li><p>Gerber 文件生成</p><p>Gerber 文件是 PCB 制造的标准格式，包含了各层铜箔、阻焊、丝印、钻孔等信息。设计验证通过后，需要生成 Gerber 文件发送给 PCB 厂商生产。</p><p>Gerber 文件通常包括：顶层铜箔、底层铜箔、内层铜箔（多层板）、阻焊层、丝印层、钻孔文件、贴片文件等。每层对应一个 Gerber 文件，文件名要清楚标识层的含义。生成 Gerber 文件后，要使用 Gerber 查看器（如 Gerbv、ViewMate）打开检查，确认各层是否正确、钻孔是否对齐、丝印是否清晰。发现问题要及时修改设计，重新生成 Gerber。</p><p>除了 Gerber 文件，还要提供钻孔说明文件、PCB 规格说明文档。规格说明要注明板材类型、板厚、铜厚、阻焊颜色、表面处理工艺、特殊要求等，方便厂商理解和生产。</p></li></ol><h2 id="国内打板生态" tabindex="-1">国内打板生态 <a class="header-anchor" href="#国内打板生态" aria-label="Permalink to “国内打板生态”">​</a></h2><p>国内的 PCB 制造生态非常成熟，从打样到批量生产，从 PCB 制造到 SMT 贴片，都有完整的产业链支撑。对于嵌入式开发者，了解这个生态可以大大提高开发效率。</p><p><strong>打样服务商</strong></p><p>嘉立创是国内最大的 PCB 快速打样服务商，以价格低廉、交期快著称。嘉立创的&quot;5 片 10cm×10cm 双层板免费&quot;政策对个人开发者非常友好，虽然需要支付运费，但实际成本很低。嘉立创的下单系统支持自动解析 Gerber 文件，实时报价，下单流程便捷。对于标准工艺板子，嘉立创的交期通常在 48-72 小时，加急可以 24 小时出货。</p><p>捷配是一家较新的 PCB 打样平台，主打&quot;极速打样&quot;，承诺 12-24 小时出货。捷配的价格比嘉立创略高，但交期更快，适合紧急项目。捷配的在线客服响应及时，技术支持较好。</p><p>四层板、六层板等多层板的打样成本明显高于双层板。嘉立创的四层板打样价格约为双层板的 3-4 倍，且不享受免费政策。对于多层板设计，建议先通过仿真验证，再下单打样，减少反复次数。</p><p><strong>批量生产商</strong></p><p>当 PCB 设计定型后，需要小批量或批量生产时，可以选择专业的 PCB 生产厂商。这些厂商通常不直接服务个人开发者，而是通过业务员对接，适合企业级客户。</p><p>深联电路、兴森快捷、沪士电子是知名的 PCB 生产厂商，质量可靠，产能充足。批量生产的价格比打样优惠很多，100 片以上的订单可以洽谈批量价。批量生产需要提供 Gerber 文件、规格说明、BOM 表等完整资料，生产周期通常为 5-10 个工作日。</p><p>批量生产时要注意质量管控。首件要做全检，确认焊接质量、电气连接是否正确。批量生产过程中要定期抽检，发现质量问题及时反馈厂商。对于关键产品，可以派人驻厂监工，确保生产质量。</p><p><strong>SMT 贴片服务</strong></p><p>PCB 制造完成后，还需要焊接元器件才能使用。对于元器件数量少、封装大的板子，可以手工焊接；对于元器件数量多、有 BGA/QFN 封装的板子，建议使用 SMT 贴片服务。</p><p>嘉立创提供一站式 SMT 贴片服务，用户只需提供 PCB 文件和 BOM 表，嘉立创会完成 PCB 制造、元器件采购、SMT 贴片全流程。这种服务适合元器件数量在几十到几百个的中等复杂度板子，价格比单独采购元器件和贴片要高，但省时省力。</p><p>对于大批量生产，可以找专业的 SMT 工厂。这些工厂通常有先进的贴片设备，可以处理 0201、BGA 等小型封装。SMT 工厂需要提供 Gerber 文件、BOM 表、坐标文件，坐标文件描述了每个元器件在 PCB 上的精确位置和旋转角度。</p><p><strong>元器件采购渠道</strong></p><p>元器件采购是 PCB 设计的下游环节，但与设计紧密相关。设计时要选择容易采购的元器件，避免使用停产或稀有的型号。</p><p>立创商城是国内最大的电子元器件零售商之一，适合小批量采购。立创的优势是库存充足、发货快、支持混批，可以一站式采购常用元器件。立创的价格略高于进口渠道，但胜在方便快捷。</p><p>得捷电子、贸泽电子是国际知名的元器件分销商，适合采购进口品牌元器件。这两家的库存真实、质量可靠，但价格较高，交期较长，适合小批量打样。</p><p>对于批量生产，可以找元器件代理商。代理商是元器件原厂的授权渠道，可以保证货源正品，享受批量折扣。热门元器件的代理权已经被大厂瓜分，小企业拿货困难，可以考虑通过贸易商采购。</p><p><strong>采购建议</strong></p><p>对于个人开发者和小团队，建议的流程是：使用 KiCad/EasyEDA 设计 PCB → 嘉立创打样 → 立创商城采购元器件 → 手工焊接或嘉立创 SMT 贴片。这个流程成本最低、速度最快，适合快速迭代。</p><p>对于企业级产品，建议的流程是：使用 Altium/Cadence 设计 PCB → 批量生产商打样 → 代理商采购元器件 → SMT 工厂贴片 → 产品测试和认证。这个流程质量更高、更适合批量，但成本和时间投入更大。</p><p>无论哪种流程，都要注意文档管理。每个版本的 PCB 文件、Gerber 文件、BOM 表都要归档保存，方便后续追溯和改版。设计变更时要及时更新文档，避免版本混乱。</p>',40)])])}const S=e(B,[["render",o]]);export{d as __pageData,S as default};
