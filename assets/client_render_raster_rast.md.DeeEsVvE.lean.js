import{_ as s,o as a,c as l,ah as e,j as Q,a as t}from"./chunks/framework.DYrKkesV.js";const T1=JSON.parse('{"title":"光栅化算法","description":"","frontmatter":{},"headers":[],"relativePath":"client/render/raster/rast.md","filePath":"client/render/raster/rast.md"}'),m={name:"client/render/raster/rast.md"},n={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"9.853ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 4355 1000","aria-hidden":"true"},o={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"8.267ex",height:"1.441ex",role:"img",focusable:"false",viewBox:"0 -443 3654 637","aria-hidden":"true"},i={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},h={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"48.049ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 21237.9 1000","aria-hidden":"true"},p={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"5.169ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 2284.7 1000","aria-hidden":"true"},H={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},u={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.144ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3157.8 1000","aria-hidden":"true"},w={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.144ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3157.8 1000","aria-hidden":"true"},x={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.464ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.109ex",height:"1.464ex",role:"img",focusable:"false",viewBox:"0 -442 490 647","aria-hidden":"true"},L={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.016ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.049ex",height:"4.864ex",role:"img",focusable:"false",viewBox:"0 -1259 11955.5 2150","aria-hidden":"true"},k={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.016ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.684ex",height:"4.864ex",role:"img",focusable:"false",viewBox:"0 -1259 9142.2 2150","aria-hidden":"true"},V={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.699ex",height:"1.545ex",role:"img",focusable:"false",viewBox:"0 -683 751 683","aria-hidden":"true"},b={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"23.423ex",height:"1.945ex",role:"img",focusable:"false",viewBox:"0 -694 10352.8 859.6","aria-hidden":"true"},v={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},_={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.6ex",height:"1.945ex",role:"img",focusable:"false",viewBox:"0 -694 7337.1 859.6","aria-hidden":"true"},C={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},j={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"6.207ex",height:"1.927ex",role:"img",focusable:"false",viewBox:"0 -694 2743.5 851.8","aria-hidden":"true"},A={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},S={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"47.402ex",height:"5.475ex",role:"img",focusable:"false",viewBox:"0 -1460 20951.6 2420","aria-hidden":"true"},P={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},R={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.738ex",height:"1.945ex",role:"img",focusable:"false",viewBox:"0 -694 17122.1 859.6","aria-hidden":"true"},B={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"51.577ex",height:"5.475ex",role:"img",focusable:"false",viewBox:"0 -1460 22797.2 2420","aria-hidden":"true"},I={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.62ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 716 454","aria-hidden":"true"},z={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.552ex"},xmlns:"http://www.w3.org/2000/svg",width:"21.926ex",height:"4.588ex",role:"img",focusable:"false",viewBox:"0 -1342 9691.1 2028","aria-hidden":"true"},N={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.375ex"},xmlns:"http://www.w3.org/2000/svg",width:"22.64ex",height:"1.945ex",role:"img",focusable:"false",viewBox:"0 -694 10006.8 859.6","aria-hidden":"true"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.667ex"},xmlns:"http://www.w3.org/2000/svg",width:"26.096ex",height:"2.237ex",role:"img",focusable:"false",viewBox:"0 -694 11534.6 989","aria-hidden":"true"};function U($,T,q,K,W,Y){return a(),l("div",null,[T[62]||(T[62]=e("",7)),Q("p",null,[T[2]||(T[2]=t("投影后的齐次坐标形式为 ",-1)),Q("mjx-container",n,[(a(),l("svg",d,[...T[0]||(T[0]=[e("",1)])])),T[1]||(T[1]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",null,","),Q("mi",null,"y"),Q("mo",null,","),Q("mi",null,"z"),Q("mo",null,","),Q("mi",null,"w"),Q("mo",{stretchy:"false"},")")])],-1))]),T[3]||(T[3]=t('，其中 w 分量保留了深度信息。透视除法后，x 和 y 坐标反映了物体在屏幕上的位置，z 坐标（经过深度映射）用于深度测试。这就是为什么透视投影会产生"近大远小"的效果——w 分量随距离增大，除法后坐标收缩。',-1))]),T[63]||(T[63]=Q("h2",{id:"三角形光栅化",tabindex:"-1"},[t("三角形光栅化 "),Q("a",{class:"header-anchor",href:"#三角形光栅化","aria-label":"Permalink to “三角形光栅化”"},"​")],-1)),T[64]||(T[64]=Q("p",null,"三角形是 3D 渲染的基本图元，原因在于：三角形一定是平面图形（四个顶点可能不共面）；三角形可以任意细分；任何多边形都可以三角剖分。",-1)),T[65]||(T[65]=Q("h3",{id:"边界函数法",tabindex:"-1"},[t("边界函数法 "),Q("a",{class:"header-anchor",href:"#边界函数法","aria-label":"Permalink to “边界函数法”"},"​")],-1)),T[66]||(T[66]=Q("p",null,"边界函数法（Edge Function）是现代 GPU 实现光栅化的核心算法，其思想是使用三角形三条边的隐式方程判断点是否在三角形内。",-1)),Q("p",null,[T[6]||(T[6]=t("对于三角形的三个顶点 ",-1)),Q("mjx-container",o,[(a(),l("svg",r,[...T[4]||(T[4]=[e("",1)])])),T[5]||(T[5]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"0")]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"2")])])],-1))]),T[7]||(T[7]=t("，每条边定义一个边界函数：",-1))]),Q("mjx-container",i,[(a(),l("svg",h,[...T[8]||(T[8]=[e("",1)])])),T[9]||(T[9]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"01")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",null,","),Q("mi",null,"y"),Q("mo",{stretchy:"false"},")"),Q("mo",null,"="),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"y"),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"−"),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")")])],-1))]),Q("p",null,[T[12]||(T[12]=t("边界函数的几何意义是点 ",-1)),Q("mjx-container",p,[(a(),l("svg",g,[...T[10]||(T[10]=[e("",1)])])),T[11]||(T[11]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",{stretchy:"false"},"("),Q("mi",null,"x"),Q("mo",null,","),Q("mi",null,"y"),Q("mo",{stretchy:"false"},")")])],-1))]),T[13]||(T[13]=t(" 到边的有向距离乘以边长。如果在三角形内部，三个边界函数的符号相同（假设顶点按逆时针顺序）。",-1))]),T[67]||(T[67]=e("",3)),Q("ul",null,[T[29]||(T[29]=Q("li",null,[Q("p",null,"算法流程："),Q("ol",null,[Q("li",null,"找到三角形的最高和最低 y 坐标，确定扫描范围"),Q("li",null,"对每条扫描线，计算与三角形两条边的交点，得到左右边界"),Q("li",null,"在左右边界之间填充像素")])],-1)),Q("li",null,[Q("p",null,[T[20]||(T[20]=t("边缘方程： 对于边 ",-1)),Q("mjx-container",H,[(a(),l("svg",u,[...T[14]||(T[14]=[e("",1)])])),T[15]||(T[15]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")")])],-1))]),T[21]||(T[21]=t(" 到 ",-1)),Q("mjx-container",w,[(a(),l("svg",c,[...T[16]||(T[16]=[e("",1)])])),T[17]||(T[17]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"1")]),Q("mo",null,","),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},")")])],-1))]),T[22]||(T[22]=t("，在扫描线 ",-1)),Q("mjx-container",x,[(a(),l("svg",f,[...T[18]||(T[18]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D466",d:"M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),T[19]||(T[19]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"y")])],-1))]),T[23]||(T[23]=t(" 处的 x 坐标为：",-1))]),Q("mjx-container",L,[(a(),l("svg",y,[...T[24]||(T[24]=[e("",1)])])),T[25]||(T[25]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"x"),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("mo",{stretchy:"false"},"("),Q("mi",null,"y"),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")"),Q("mo",null,"⋅"),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")])]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")])])])])],-1))]),T[28]||(T[28]=Q("p",null,"相邻扫描线的 x 坐标可以增量计算：",-1)),Q("mjx-container",k,[(a(),l("svg",M,[...T[26]||(T[26]=[e("",1)])])),T[27]||(T[27]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("msub",null,[Q("mi",null,"x"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"y"),Q("mo",null,"+"),Q("mn",null,"1")])]),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"x"),Q("mi",null,"y")]),Q("mo",null,"+"),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"x"),Q("mn",null,"0")])]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"1")]),Q("mo",null,"−"),Q("msub",null,[Q("mi",null,"y"),Q("mn",null,"0")])])])])],-1))])])]),T[68]||(T[68]=Q("p",null,"优缺点：逻辑清晰，适合软件实现；按顺序遍历，缓存友好；除法运算成本高；处理斜边时可能出现裂缝或重叠；现代 GPU 需要并行处理，扫描线的顺序性不适合。",-1)),T[69]||(T[69]=Q("h2",{id:"重心坐标与属性插值",tabindex:"-1"},[t("重心坐标与属性插值 "),Q("a",{class:"header-anchor",href:"#重心坐标与属性插值","aria-label":"Permalink to “重心坐标与属性插值”"},"​")],-1)),T[70]||(T[70]=Q("p",null,"确定像素在三角形内后，需要计算该像素的深度、纹理坐标、颜色等属性。这些属性通过对顶点属性插值得到，插值权重就是重心坐标。",-1)),T[71]||(T[71]=Q("h3",{id:"重心坐标",tabindex:"-1"},[t("重心坐标 "),Q("a",{class:"header-anchor",href:"#重心坐标","aria-label":"Permalink to “重心坐标”"},"​")],-1)),Q("p",null,[T[32]||(T[32]=t("重心坐标（Barycentric Coordinates）表示点相对于三角形三个顶点的位置。对于三角形内任意点 ",-1)),Q("mjx-container",V,[(a(),l("svg",Z,[...T[30]||(T[30]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D443",d:"M287 628Q287 635 230 637Q206 637 199 638T192 648Q192 649 194 659Q200 679 203 681T397 683Q587 682 600 680Q664 669 707 631T751 530Q751 453 685 389Q616 321 507 303Q500 302 402 301H307L277 182Q247 66 247 59Q247 55 248 54T255 50T272 48T305 46H336Q342 37 342 35Q342 19 335 5Q330 0 319 0Q316 0 282 1T182 2Q120 2 87 2T51 1Q33 1 33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM645 554Q645 567 643 575T634 597T609 619T560 635Q553 636 480 637Q463 637 445 637T416 636T404 636Q391 635 386 627Q384 621 367 550T332 412T314 344Q314 342 395 342H407H430Q542 342 590 392Q617 419 631 471T645 554Z",style:{"stroke-width":"3"}})])])],-1)])])),T[31]||(T[31]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"P")])],-1))]),T[33]||(T[33]=t("，可以表示为：",-1))]),Q("mjx-container",b,[(a(),l("svg",D,[...T[34]||(T[34]=[e("",1)])])),T[35]||(T[35]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"P"),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"2")])])],-1))]),Q("p",null,[T[40]||(T[40]=t("其中 ",-1)),Q("mjx-container",v,[(a(),l("svg",_,[...T[36]||(T[36]=[e("",1)])])),T[37]||(T[37]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("mo",null,"="),Q("mn",null,"1")])],-1))]),T[41]||(T[41]=t("，且 ",-1)),Q("mjx-container",C,[(a(),l("svg",j,[...T[38]||(T[38]=[e("",1)])])),T[39]||(T[39]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("msub",null,[Q("mi",null,"λ"),Q("mi",null,"i")]),Q("mo",null,"≥"),Q("mn",null,"0")])],-1))]),T[42]||(T[42]=t("。",-1))]),T[72]||(T[72]=Q("p",null,"重心坐标可以通过边界函数计算：",-1)),Q("mjx-container",A,[(a(),l("svg",S,[...T[43]||(T[43]=[e("",1)])])),T[44]||(T[44]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"12")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"12")])]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"0")]),Q("mo",{stretchy:"false"},")")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"20")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"20")])]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"1")]),Q("mo",{stretchy:"false"},")")])]),Q("mo",null,","),Q("mstyle",{scriptlevel:"0"},[Q("mspace",{width:"1em"})]),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"01")])]),Q("mo",{stretchy:"false"},"("),Q("mi",null,"P"),Q("mo",{stretchy:"false"},")")]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"E"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mn",null,"01")])]),Q("mo",{stretchy:"false"},"("),Q("msub",null,[Q("mi",null,"v"),Q("mn",null,"2")]),Q("mo",{stretchy:"false"},")")])])])],-1))]),T[73]||(T[73]=Q("h3",{id:"属性插值",tabindex:"-1"},[t("属性插值 "),Q("a",{class:"header-anchor",href:"#属性插值","aria-label":"Permalink to “属性插值”"},"​")],-1)),T[74]||(T[74]=Q("p",null,"顶点的属性（如法向量、纹理坐标、颜色）可以使用重心坐标插值：",-1)),Q("mjx-container",P,[(a(),l("svg",R,[...T[45]||(T[45]=[e("",1)])])),T[46]||(T[46]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("mi",null,"r"),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"2")])])],-1))]),T[75]||(T[75]=Q("p",null,[t("但对于透视投影，这种线性插值是不正确的，因为透视变换产生了深度差异。需要"),Q("strong",null,"透视校正插值"),t("：")],-1)),Q("mjx-container",B,[(a(),l("svg",E,[...T[47]||(T[47]=[e("",1)])])),T[48]||(T[48]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msup",null,[Q("mi",null,"r"),Q("mo",{"data-mjx-alternate":"1"},"′")]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"0")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"1")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("mo",null,"⋅"),Q("mi",null,"a"),Q("mi",null,"t"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"r"),Q("mn",null,"2")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"2")])]),Q("mrow",null,[Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mo",null,"/")]),Q("msub",null,[Q("mi",null,"w"),Q("mn",null,"2")])])])])],-1))]),Q("p",null,[T[51]||(T[51]=t("其中 ",-1)),Q("mjx-container",I,[(a(),l("svg",O,[...T[49]||(T[49]=[Q("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[Q("g",{"data-mml-node":"math"},[Q("g",{"data-mml-node":"mi"},[Q("path",{"data-c":"1D464",d:"M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z",style:{"stroke-width":"3"}})])])],-1)])])),T[50]||(T[50]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"w")])],-1))]),T[52]||(T[52]=t(" 是顶点在裁剪空间中的 w 分量。纹理坐标必须使用透视校正插值，否则纹理会产生明显的变形。法向量、颜色等属性在视觉要求不高时可以使用线性插值以节省计算。",-1))]),T[76]||(T[76]=Q("h2",{id:"深度插值与深度测试",tabindex:"-1"},[t("深度插值与深度测试 "),Q("a",{class:"header-anchor",href:"#深度插值与深度测试","aria-label":"Permalink to “深度插值与深度测试”"},"​")],-1)),T[77]||(T[77]=Q("p",null,"光栅化不仅要生成像素，还要计算每个像素的深度值，用于深度测试判断遮挡关系。",-1)),T[78]||(T[78]=Q("h3",{id:"深度值计算",tabindex:"-1"},[t("深度值计算 "),Q("a",{class:"header-anchor",href:"#深度值计算","aria-label":"Permalink to “深度值计算”"},"​")],-1)),T[79]||(T[79]=Q("p",null,"顶点的深度值在裁剪空间中存储为 z 分量，经过透视除法后得到 NDC 深度。在屏幕空间中，深度值通过线性或对数映射到 [0, 1] 范围：",-1)),Q("mjx-container",z,[(a(),l("svg",G,[...T[53]||(T[53]=[e("",1)])])),T[54]||(T[54]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"d"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"h"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"s"),Q("mi",null,"c"),Q("mi",null,"r"),Q("mi",null,"e"),Q("mi",null,"e"),Q("mi",null,"n")])]),Q("mo",null,"="),Q("mfrac",null,[Q("mrow",null,[Q("msub",null,[Q("mi",null,"z"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"n"),Q("mi",null,"d"),Q("mi",null,"c")])]),Q("mo",null,"+"),Q("mn",null,"1")]),Q("mn",null,"2")])])],-1))]),T[80]||(T[80]=Q("p",null,"三角形内部的深度值通过重心坐标插值得到：",-1)),Q("mjx-container",N,[(a(),l("svg",F,[...T[55]||(T[55]=[e("",1)])])),T[56]||(T[56]=Q("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[Q("mi",null,"z"),Q("mo",null,"="),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"0")]),Q("msub",null,[Q("mi",null,"z"),Q("mn",null,"0")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"1")]),Q("msub",null,[Q("mi",null,"z"),Q("mn",null,"1")]),Q("mo",null,"+"),Q("msub",null,[Q("mi",null,"λ"),Q("mn",null,"2")]),Q("msub",null,[Q("mi",null,"z"),Q("mn",null,"2")])])],-1))]),T[81]||(T[81]=Q("h3",{id:"深度测试",tabindex:"-1"},[t("深度测试 "),Q("a",{class:"header-anchor",href:"#深度测试","aria-label":"Permalink to “深度测试”"},"​")],-1)),T[82]||(T[82]=Q("p",null,"每个片段的深度值与深度缓冲区中存储的值比较：",-1)),Q("ul",null,[Q("li",null,[T[59]||(T[59]=t("如果 ",-1)),Q("mjx-container",J,[(a(),l("svg",X,[...T[57]||(T[57]=[e("",1)])])),T[58]||(T[58]=Q("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[Q("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[Q("mi",null,"d"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"h"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"f"),Q("mi",null,"r"),Q("mi",null,"a"),Q("mi",null,"g"),Q("mi",null,"m"),Q("mi",null,"e"),Q("mi",null,"n"),Q("mi",null,"t")])]),Q("mo",null,"<"),Q("mi",null,"d"),Q("mi",null,"e"),Q("mi",null,"p"),Q("mi",null,"t"),Q("msub",null,[Q("mi",null,"h"),Q("mrow",{"data-mjx-texclass":"ORD"},[Q("mi",null,"b"),Q("mi",null,"u"),Q("mi",null,"f"),Q("mi",null,"f"),Q("mi",null,"e"),Q("mi",null,"r")])])])],-1))]),T[60]||(T[60]=t("，则片段通过测试，更新深度缓冲区和颜色缓冲区",-1))]),T[61]||(T[61]=Q("li",null,"否则片段被遮挡，丢弃",-1))]),T[83]||(T[83]=e("",23))])}const t1=s(m,[["render",U]]);export{T1 as __pageData,t1 as default};
